# 리액티브 프로그래밍

- 리액티브 스트림 구현체인 Flux와 Mono를 사용하여 데이터를 비동기로 바로 처리 가능
- 로직을 짤 때는 반드시 논블록킹하게 작성해야 함
  - 만약, 블록킹 코드가 있다면 `subscribeOn`과 `publishOn`을 사용하여 블록킹 코드를 별도의 스레드에서 실행하도록 해야 함
```java
// 블록킹 코드
Thread.sleep(500);
```

## 스레드

- 톰캣(프로세스)이 실행될 때 톰캣의 스레드(기본적으로 200개)를 생성
- 요청 시작부터 응답까지 톰캣의 스레드가 사용됨
- 스프링 부트는 애플리케이션이 실행될때 스레드풀을 생성함

### Tomcat vs Netty

- 톰캣은 요청이 들어오면 스레드를 할당하고, 응답이 끝나면 스레드를 반환함
- 네티는 스레드 1개가 여러 요청을 빠르게 처리할 수 있음

- 톰캣의 스레드는 IO(블록킹) 작업을 직접 대기하며 작업을 처리함
- 네티는 IO 작업을 비동기로 처리하여 스레드가 다른 작업을 수행할 수 있도록 함

네티의 스레드는 대기가 발생하면 OS한테 알려주고, 다른 작업을 수행하다가 작업이 끝나면 이벤트 루프가 다시 스레드를 깨워서 작업을 처리함

> 키워드
> thread per request model vs event loop model

